#ifndef VECTOR_H
#define VECTOR_H

#include <iostream>
#include <cstddef>

/**
 * @class Vector
 * @brief Класс динамического массива, представляющий вектор целых чисел.
 *
 * Этот класс предоставляет функциональность, аналогичную упрощённой std::vector,
 * включая управление динамической памятью, добавление и удаление элементов,
 * сравнение и поэлементные операции через перегруженные операторы.
 * Внутри используется динамический массив для хранения элементов.
 */
class Vector {
private:
    int* data;      ///< Указатель на динамический массив целых чисел.
    size_t size;    ///< Текущее количество элементов в векторе.
    size_t capacity;///< Текущая ёмкость динамического массива.

    /**
     * @brief Изменяет размер внутреннего массива на новую ёмкость.
     * @param new_capacity Новая ёмкость для изменения размера.
     *
     * Эта функция выделяет новый массив, копирует существующие элементы
     * и освобождает старый массив. При росте удваивает ёмкость.
     */
    void resize(size_t new_capacity);

public:
    /**
     * @brief Конструктор по умолчанию.
     *
     * Инициализирует пустой вектор с начальной ёмкостью 10.
     */
    Vector();

    /**
     * @brief Конструктор с начальным размером.
     * @param initial_size Начальное количество элементов.
     *
     * Инициализирует вектор с заданным размером, элементы устанавливаются в 0.
     */
    Vector(size_t initial_size);

    /**
     * @brief Конструктор копирования.
     * @param other Вектор, из которого копировать.
     *
     * Создаёт глубокую копию предоставленного вектора.
     */
    Vector(const Vector& other);

    /**
     * @brief Деструктор.
     *
     * Освобождает динамический массив.
     */
    ~Vector();

    /**
     * @brief Добавляет элемент в конец вектора.
     * @param val Значение для добавления.
     */
    void push_back(int val);

    /**
     * @brief Добавляет элемент в начало вектора.
     * @param val Значение для добавления.
     */
    void push_front(int val);

    /**
     * @brief Вставляет элемент в указанную позицию.
     * @param pos Позиция для вставки (индекс с 0).
     * @param val Значение для вставки.
     *
     * Если pos >= size, добавляет в конец.
     */
    void insert(size_t pos, int val);

    /**
     * @brief Удаляет элемент в указанной позиции.
     * @param pos Позиция для удаления (индекс с 0).
     *
     * Ничего не делает, если pos >= size.
     */
    void erase(size_t pos);

    /**
     * @brief Получает текущий размер вектора.
     * @return Количество элементов.
     */
    size_t get_size() const;

    /**
     * @brief Доступ к элементу по индексу (константная версия).
     * @param index Индекс для доступа.
     * @return Константная ссылка на элемент.
     *
     * Без проверки границ.
     */
    const int& operator[](size_t index) const;

    /**
     * @brief Доступ к элементу по индексу.
     * @param index Индекс для доступа.
     * @return Ссылка на элемент.
     *
     * Без проверки границ.
     */
    int& operator[](size_t index);

    /**
     * @brief Сравнивает два вектора на равенство.
     * @param other Вектор для сравнения.
     * @return True, если размеры и элементы равны, иначе false.
     */
    bool operator==(const Vector& other) const;

    /**
     * @brief Выполняет поэлементное сложение двух векторов.
     * @param other Вектор для сложения.
     * @return Новый вектор с суммированными элементами.
     *
     * Требует одинакового размера векторов; иначе возвращает пустой вектор.
     */
    Vector operator+(const Vector& other) const;

    /**
     * @brief Выполняет поэлементное умножение двух векторов.
     * @param other Вектор для умножения.
     * @return Новый вектор с умноженными элементами.
     *
     * Требует одинакового размера векторов; иначе возвращает пустой вектор.
     */
    Vector operator*(const Vector& other) const;

    // Декларация дружественной функции
    friend std::ostream& operator<<(std::ostream& os, const Vector& v);
};

/**
 * @brief Дружественная функция для вывода вектора в поток.
 * @param os Выходной поток.
 * @param v Вектор для вывода.
 * @return Ссылка на выходной поток.
 *
 * Выводит элементы вектора в формате: [1, 2, 3]
 */
std::ostream& operator<<(std::ostream& os, const Vector& v);

#endif // VECTOR_H